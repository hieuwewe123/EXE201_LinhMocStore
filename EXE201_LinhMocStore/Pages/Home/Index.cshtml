@page
@model IndexModel
@{
    ViewData["Title"] = "Trang chủ - Linh Mộc Store";
}


<!-- Slider -->
<div id="mainSlider" class="carousel slide carousel-fade" data-bs-ride="carousel" data-bs-interval="5000">
    <div class="carousel-indicators">
        <button type="button" data-bs-target="#mainSlider" data-bs-slide-to="0" class="active"></button>
        <button type="button" data-bs-target="#mainSlider" data-bs-slide-to="1"></button>
        <button type="button" data-bs-target="#mainSlider" data-bs-slide-to="2"></button>
    </div>
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img src="https://www.elle.vn/wp-content/uploads/2024/01/09/565409/vong-tram-dep.jpg"
                 class="d-block w-100" alt="Vòng phong thủy">
            <div class="carousel-caption animate__animated animate__fadeInUp">
                <h2 class="display-4 fw-bold">Vòng Phong Thủy Cao Cấp</h2>
                <p class="lead">Mang lại may mắn và tài lộc cho bạn</p>
                <a href="/products" class="btn btn-primary btn-lg mt-3 pulse-effect">Khám phá ngay</a>
            </div>
        </div>
        <div class="carousel-item">
            <img src="https://phongthuy.trustweb.vn/wp-content/uploads/2025/03/vong-tay-phong-thuy-go-tram-huong-soc-ho-1743024577-1.jpg"
                 class="d-block w-100" alt="Vòng gỗ">
            <div class="carousel-caption animate__animated animate__fadeInUp">
                <h2 class="display-4 fw-bold">Vòng Gỗ Tự Nhiên</h2>
                <p class="lead">Chất lượng cao cấp, thiết kế độc đáo</p>
                <a href="/products" class="btn btn-primary btn-lg mt-3 pulse-effect">Khám phá ngay</a>
            </div>
        </div>
        <div class="carousel-item">
            <img src="https://xika.vn/wp-content/uploads/2020/12/Vong-phong-thuy-go-huyet-long.png"
                 class="d-block w-100" alt="Vòng đá">
            <div class="carousel-caption animate__animated animate__fadeInUp">
                <h2 class="display-4 fw-bold">Vòng Đá Phong Thủy</h2>
                <p class="lead">Năng lượng tích cực, bảo vệ sức khỏe</p>
                <a href="/products" class="btn btn-primary btn-lg mt-3 pulse-effect">Khám phá ngay</a>
            </div>
        </div>
    </div>
    <button class="carousel-control-prev" type="button" data-bs-target="#mainSlider" data-bs-slide="prev">
        <span class="carousel-control-prev-icon"></span>
    </button>
    <button class="carousel-control-next" type="button" data-bs-target="#mainSlider" data-bs-slide="next">
        <span class="carousel-control-next-icon"></span>
    </button>
</div>

<!-- Sản phẩm mới nhất -->
<section class="py-5 animate__animated animate__fadeIn">
    <div class="container">
        <h2 class="text-center mb-4 section-title">Sản Phẩm Mới Nhất</h2>
        <div class="row">
            @foreach (var product in Model.LatestProducts)
            {
                <div class="col-md-4 mb-4">
                    <div class="card h-100 product-card">
                        <div class="card-img-wrapper">
                            <img src="@(string.IsNullOrEmpty(product.Image) ? "/images/no-image.jpg" : product.Image)" class="card-img-top" alt="@product.Name">
                            <div class="card-img-overlay d-flex align-items-center justify-content-center">
                                <a href="/products/details/@product.ProductId" class="btn btn-light btn-sm">Xem chi tiết</a>
                            </div>
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">@product.Name</h5>
                            <p class="card-text">@(string.IsNullOrEmpty(product.Description) ? "Không có mô tả" : product.Description)</p>
                            <p class="card-text">
                                <small class="text-muted"><i class="fas fa-gem me-1"></i> Chất liệu: @(string.IsNullOrEmpty(product.Material) ? "Không có thông tin" : product.Material)</small><br>
                                <small class="text-muted"><i class="fas fa-ruler me-1"></i> Kích thước: @(string.IsNullOrEmpty(product.Size) ? "Không có thông tin" : product.Size)</small>
                            </p>
                            <p class="card-text text-primary fw-bold">@product.Price.ToString("N0") VNĐ</p>
                            <a href="/products/details/@product.ProductId" class="btn btn-primary w-100">Xem chi tiết</a>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</section>

<!-- Sản phẩm nổi bật -->
<section class="py-5 bg-light animate__animated animate__fadeIn">
    <div class="container">
        <h2 class="text-center mb-4 section-title">Sản Phẩm Nổi Bật</h2>
        <div class="row">
            @foreach (var product in Model.FeaturedProducts)
            {
                <div class="col-md-4 mb-4">
                    <div class="card h-100 product-card">
                        <div class="card-img-wrapper">
                            <img src="@(string.IsNullOrEmpty(product.Image) ? "/images/no-image.jpg" : product.Image)" 
                                 class="card-img-top" alt="@product.Name">
                            <div class="card-img-overlay d-flex align-items-center justify-content-center">
                                <a href="/products/details/@product.ProductId" class="btn btn-light btn-sm">Xem chi tiết</a>
                            </div>
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">@product.Name</h5>
                            <p class="card-text">@(string.IsNullOrEmpty(product.Description) ? "Không có mô tả" : product.Description)</p>
                            <p class="card-text">
                                <small class="text-muted"><i class="fas fa-gem me-1"></i> Chất liệu: @(string.IsNullOrEmpty(product.Material) ? "Không có thông tin" : product.Material)</small><br>
                                <small class="text-muted"><i class="fas fa-ruler me-1"></i> Kích thước: @(string.IsNullOrEmpty(product.Size) ? "Không có thông tin" : product.Size)</small>
                            </p>
                            <p class="card-text text-primary fw-bold">@product.Price.ToString("N0") VNĐ</p>
                            <a href="/products/details/@product.ProductId" class="btn btn-primary w-100">Xem chi tiết</a>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</section>

<!-- Bài viết nổi bật -->
<section class="py-5">
    <div class="container">
        <h2 class="text-center mb-4">Bài Viết Nổi Bật</h2>
        <div class="row">
            @foreach (var blog in Model.FeaturedBlogs)
            {
                <div class="col-md-4 mb-4">
                    <div class="card h-100">
                        <img src="@(string.IsNullOrEmpty(blog.Image) ? "/images/no-image.jpg" : blog.Image)" class="card-img-top" alt="@blog.Title">
                        <div class="card-body">
                            <h5 class="card-title">@blog.Title</h5>
                            <p class="card-text">@(string.IsNullOrEmpty(blog.Summary) ? blog.Content?.Substring(0, Math.Min(100, blog.Content.Length)) + "..." : blog.Summary)</p>
                            <p class="card-text">
                                <small class="text-muted">Tác giả: @(string.IsNullOrEmpty(blog.Author) ? "Admin" : blog.Author)</small><br>
                                <small class="text-muted">Ngày đăng: @blog.CreatedAt.ToString("dd/MM/yyyy")</small>
                            </p>
                            <a href="/blogs/details/@blog.BlogId" class="btn btn-outline-primary">Đọc thêm</a>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</section>

@section Styles {
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* General Styles */
        body {
            padding-top: 76px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        /* Header Styles */
        .navbar {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%) !important;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .hover-effect {
            position: relative;
            transition: all 0.3s ease;
        }

        .hover-effect::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 0;
            background-color: #fff;
            transition: width 0.3s ease;
        }

        .hover-effect:hover::after {
            width: 100%;
        }

        /* Slider Styles */
        .carousel-item {
            height: 600px;
        }

        .carousel-item img {
            object-fit: cover;
            height: 100%;
            filter: brightness(0.8);
        }

        .carousel-caption {
            background: rgba(0, 0, 0, 0.6);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(5px);
        }

        /* Card Styles */
        .product-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: none;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
        }

        .card-img-wrapper {
            position: relative;
            overflow: hidden;
            height: 250px;
        }

        .card-img-wrapper img {
            transition: transform 0.5s ease;
            height: 100%;
            object-fit: cover;
            background-color: #f8f9fa;
        }

        .card-img-wrapper img[src*="no-image"] {
            object-fit: contain;
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        .product-card:hover .card-img-wrapper img {
            transform: scale(1.1);
        }

        .card-img-overlay {
            background: rgba(0,0,0,0.5);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .product-card:hover .card-img-overlay {
            opacity: 1;
        }

        /* Button Styles */
        .btn-primary {
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            border: none;
            padding: 10px 25px;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }

        .pulse-effect {
            animation: pulse-animation 2s infinite;
        }

        @@keyframes pulse-animation {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }

        /* Section Titles */
        .section-title {
            position: relative;
            padding-bottom: 15px;
            margin-bottom: 30px;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
        }

        /* Responsive Design */
        @@media (max-width: 768px) {
            .carousel-item {
                height: 400px;
            }

            .carousel-caption {
                padding: 15px;
            }

            .carousel-caption h2 {
                font-size: 1.5rem;
            }

            .card-img-wrapper {
                height: 200px;
            }
        }

        /* Image Placeholder Styles */
        .no-image-placeholder {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 1.2rem;
            text-align: center;
            padding: 20px;
        }
    </style>
}

@section Scripts {
    <script>
        // Add smooth scrolling
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        // Add animation on scroll
        const observerOptions = {
            threshold: 0.1
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate__animated', 'animate__fadeInUp');
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);

        document.querySelectorAll('.product-card, .section-title').forEach((el) => {
            observer.observe(el);
        });

        // Handle image loading errors
        document.querySelectorAll('img').forEach(img => {
            img.onerror = function() {
                this.src = 'https://images.unsplash.com/photo-1611652022419-a9419f74343d?auto=format&fit=crop&w=800&q=80';
                this.classList.add('no-image-placeholder');
            }
        });

        document.addEventListener('DOMContentLoaded', function() {
            // Initialize carousel with custom options
            var myCarousel = new bootstrap.Carousel(document.getElementById('mainSlider'), {
                interval: 5000,  // Change slide every 5 seconds
                wrap: true,      // Continuous loop
                keyboard: true,  // Enable keyboard navigation
                pause: 'hover'   // Pause on mouse hover
            });

            // Optional: Add touch swipe support for mobile
            var touchStartX = 0;
            var touchEndX = 0;
            var slider = document.getElementById('mainSlider');

            slider.addEventListener('touchstart', function(e) {
                touchStartX = e.changedTouches[0].screenX;
            }, false);

            slider.addEventListener('touchend', function(e) {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            }, false);

            function handleSwipe() {
                if (touchEndX < touchStartX - 50) {
                    myCarousel.next(); // Swipe left
                }
                if (touchEndX > touchStartX + 50) {
                    myCarousel.prev(); // Swipe right
                }
            }
        });
    </script>
}
